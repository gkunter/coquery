
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Coquery Documentation: Tutorial &#8212; Coquery 0.11.prev documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/agogo.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Users manual" href="../userguide/index.html" />
    <link rel="prev" title="Coquery documentation" href="../index.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
          <p class="logo"><a href="../../index.html">
            <img class="logo" src="../../_static/logo_small.png" alt="Logo"/>
          </a></p>
        <div class="headertitle"><a
          href="../../index.html">Coquery 0.11.prev documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="../index.html" title="Coquery documentation"
             accesskey="P">previous</a> |
          <a href="../userguide/index.html" title="Users manual"
             accesskey="N">next</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="toctree-wrapper compound" id="tutorial">
</div>
<section id="id1">
<h1>Tutorial</h1>
<p>This tutorial will guide you through your first session using Coquery.
You will install a corpus, run a query on that corpus, and visualize
the results.</p>
<p>At the end of this tutorial, you will have solved the following task:</p>
<ul class="simple">
<li><p>Visualize the occurrences of ten key characters in the twelve chapters
of <em>Alice’s Adventures in Wonderland</em> by Lewis Carroll</p></li>
</ul>
<section id="starting-coquery">
<h2>Starting Coquery</h2>
<p>Follow the steps described in <span class="xref std std-ref">download</span> to install Coquery. Once
installed, either choose the Coquery icon from the Applications menu (if you
used the binary installer), or open a terminal, change to the directory
containing the Coquery files, and type <code class="docutils literal notranslate"><span class="pre">./coquery.py</span></code> (if you are on
Linux or Mac OS X) or <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">coquery.py</span></code> (if you are on Windows).
the main interface will open:</p>
<figure class="align-default" id="id2">
<a class="reference internal image-reference" href="../../_images/coquery_empty.png"><img alt="../../_images/coquery_empty.png" src="../../_images/coquery_empty.png" style="width: 407.0px; height: 344.0px;" /></a>
<figcaption>
<p><span class="caption-text">The main interface when launching Coquery for the first time.</span></p>
</figcaption>
</figure>
<p>Most of the functions in the main interface are inactive. This is so because
there is no corpus available yet. We will change this by building our
first corpus.</p>
</section>
<section id="building-the-alice-corpus">
<h2>Building the ALICE corpus</h2>
<p>The twelve chapters of <em>Alice’s Adventures in Wonderland</em> by Lewis Carroll
(available from <a class="reference external" href="http://www.gutenberg.org/cache/epub/11/pg11.txt">Project Gutenberg</a>)
are already provided as text files by Coquery in the the subdirectory
<code class="docutils literal notranslate"><span class="pre">texts/alice</span></code> of the installation directory. We will use these text files
to build the ALICE corpus.</p>
<p>First, select ‘Corpus manager` from the ‘Corpus’ menu. The corpus manager
dialog will open:</p>
<figure class="align-default" id="id3">
<a class="reference internal image-reference" href="../../_images/corpus_manager_empty.png"><img alt="../../_images/corpus_manager_empty.png" src="../../_images/corpus_manager_empty.png" style="width: 420.0px; height: 320.0px;" /></a>
<figcaption>
<p><span class="caption-text">The corpus manager.</span></p>
</figcaption>
</figure>
<p>Now, click on the green ‘Add’ button <a class="reference internal" href="../coquery/icons/small-n-flat/PNG/sign-add.png"><img alt="add" src="../coquery/icons/small-n-flat/PNG/sign-add.png" style="height: 12px;" /></a> on the entry labelled ‘Build new
corpus…’ to open the Corpus builder:</p>
<figure class="align-default" id="id4">
<a class="reference internal image-reference" href="../../_images/corpus_builder.png"><img alt="../../_images/corpus_builder.png" src="../../_images/corpus_builder.png" style="width: 337.5px; height: 276.0px;" /></a>
<figcaption>
<p><span class="caption-text">The corpus builder.</span></p>
</figcaption>
</figure>
<p>The path to the <em>Alice</em> text files is already set up correctly. Type in the
name of the new corpus: ALICE, and click on ‘Build’. Leave the other options
for later (you can use them later to select a meta file that contains
information on each of your corpus files, or to build a corpus with automatic
lemmatization and POS tagging, which is provided by the NLTK toolkit).</p>
<p>The corpus builder will take a few moments to load the texts from the file
into the new corpus. When finished, you will see an entry ALICE under ‘User
corpora’ in the corpus manager. You can click on the entry to see a corpus overview.</p>
<p>When you are finished, close the corpus manager window.</p>
</section>
<section id="getting-a-frequency-list">
<h2>Getting a frequency list</h2>
<p>You will notice that now that the ALICE corpus is installed, many more
functions in the main interface have become active.</p>
<p>In order to get a frequency list for the words in the ALICE corpus, enter a
single asterisk ‘*’ (without quotation marks) into the query string entry
field. The asterisk is a wild card that matches any orthographic word in the
corpus:</p>
<figure class="align-default" id="id5">
<a class="reference internal image-reference" href="../../_images/tutorial_query_string_asterisk.png"><img alt="../../_images/tutorial_query_string_asterisk.png" src="../../_images/tutorial_query_string_asterisk.png" style="width: 154.5px; height: 160.0px;" /></a>
<figcaption>
<p><span class="caption-text">A query string matching any orthographic word.</span></p>
</figcaption>
</figure>
<p>Next, click on ‘Transformation’ in the data management toolbox in the upper
right corner of the main interface. You can choose between different
transformations that will be applied to the query results once they are
retrieved from the corpus. For example, you can hide all duplicate rows so
that only the distinct rows will be shown. In this tutorial, we want to
produce a frequency list, so activate the corresponding option:</p>
<figure class="align-default" id="id6">
<a class="reference internal image-reference" href="../../_images/tutorial_aggregation_frequency.png"><img alt="../../_images/tutorial_aggregation_frequency.png" src="../../_images/tutorial_aggregation_frequency.png" style="width: 88.5px; height: 196.0px;" /></a>
<figcaption>
<p><span class="caption-text">Activating the Frequency list transformation.</span></p>
</figcaption>
</figure>
<p>Now, it is time to run your first query. Simply click the ‘<a class="reference internal" href="../coquery/icons/small-n-flat/PNG/go.png"><img alt="go" src="../coquery/icons/small-n-flat/PNG/go.png" style="height: 12px;" /></a> New query’
button. After a few moments, a frequency list will be shown in the query
results table:</p>
<figure class="align-default" id="id7">
<a class="reference internal image-reference" href="../../_images/tutorial_results_table.png"><img alt="../../_images/tutorial_results_table.png" src="../../_images/tutorial_results_table.png" style="width: 386.5px; height: 189.5px;" /></a>
<figcaption>
<p><span class="caption-text">The frequency table from the ALICE corpus.</span></p>
</figcaption>
</figure>
<p>The status bar informs you that the query matched 33486 tokens. The results
table uses the Frequency list transformation, which returns 2787 data rows.
This means that the 33486 tokens in the ALICE corpus are split across 2787
different types.</p>
<p>As you can see in the results table, there are 12 tokens of the word <em>chapter</em>,
400 tokens of the word <em>i</em>, 985 tokens of the full stop, and so on.</p>
<p>The current order of types is in the order of appearance in the corpus. You
can sort the results table by right-clicking on a table header, and selecting
a sorting option from the context menu. If you want to see the most frequent
types on top of the results table, select a descending sort order:</p>
<figure class="align-default" id="id8">
<a class="reference internal image-reference" href="../../_images/tutorial_sort_descending.png"><img alt="../../_images/tutorial_sort_descending.png" src="../../_images/tutorial_sort_descending.png" style="width: 126.5px; height: 117.5px;" /></a>
<figcaption>
<p><span class="caption-text">Selecting a descending sorting order for the column Frequency.</span></p>
</figcaption>
</figure>
<p>The results table will be rearranged instantly. To no great surprise, the
comma and the quotation mark are the most frequent types in ALICE, followed
by the definite article <em>the</em>, the full stop, and the conjunction <em>and</em>. With
a female protagonist, <em>she</em> also ranks relatively high at rank eight. The name
<em>Alice</em> appears at rank 14.</p>
<p>You can save the results table by calling ‘Save results’ from the File menu.
The table is saved as a file with comma-separated values (CSV). You can use
this file in other programs such as <em>OpenOffice/LibreOffice Calc</em> or
<em>R</em>/<em>RStudio</em>.</p>
</section>
<section id="contingency-tables">
<h2>Contingency tables</h2>
<p>In the second part of our tutorial task, we want to find out in which
chapters from <em>Alice’s Adventures in Wonderland</em> the ten key characters are
mentioned.</p>
<p>However, there is a small problem: as your ALICE corpus doesn’t contain any
metadata, there is no straightforward way of identifying key characters
automatically. We solve this problem by assuming that in a story like
<em>Alice’s Adventures</em>, the important characters will be referred to by animate
nouns, and that the frequency of the nouns will reflect their importance for
the story.</p>
<p>Thus, we go through the sorted word frequency list and find the ten most
frequent animate nouns (this excludes, for instance, <em>way</em>, <em>thing</em>, and
<em>voice</em>).We enter these nouns as new query strings, each word on a separate
line (actually, I cheated and entered the <strong>eleven</strong> most frequent animate
nouns, only because the <em>Cheshire cat</em> was always my favourite character from
the book):</p>
<figure class="align-default" id="id9">
<a class="reference internal image-reference" href="../../_images/tutorial_animate_nouns.png"><img alt="../../_images/tutorial_animate_nouns.png" src="../../_images/tutorial_animate_nouns.png" style="width: 156.5px; height: 159.0px;" /></a>
<figcaption>
<p><span class="caption-text">The eleven most frequent animate nouns in ALICE as query strings.</span></p>
</figcaption>
</figure>
<p>Before we run a new query to get the matches for these query strings, we have
to indicate that we also want to include the chapter information in our query
result table. We do this by including the corpus feature ‘Filename’ as an
additional output column in the results table. We use the ‘Feature selection’
tree in the upper left corner of the main interface for that. Make sure that
both ‘Word’ in the ‘Tokens’ table as well as ‘Filename’ in the ‘Files’ table
are selected, like in the following picture:</p>
<figure class="align-default" id="id10">
<a class="reference internal image-reference" href="../../_images/tutorial_output_columns.png"><img alt="../../_images/tutorial_output_columns.png" src="../../_images/tutorial_output_columns.png" style="width: 145.0px; height: 197.5px;" /></a>
<figcaption>
<p><span class="caption-text">The ‘Feature selection’ tree with ‘Word’ and ‘Filename’ selected.</span></p>
</figcaption>
</figure>
<p>As you can see in the figure, the checkboxes next to ‘Word’ and ‘Filename’
are ticked. This means that the query will include the information from these
two columns in the results table. ‘Word’ was ticked by default, which is why
the result table contained the Word column in the first place.</p>
<p>Now, with ‘Word’ and ‘Filename’ selected, click the ‘<a class="reference internal" href="../coquery/icons/small-n-flat/PNG/go.png"><img alt="go" src="../coquery/icons/small-n-flat/PNG/go.png" style="height: 12px;" /></a> New uery’ button to
run a new query. If you followed all steps from the tutorial, your new
results table should look like this:</p>
<figure class="align-default" id="id11">
<a class="reference internal image-reference" href="../../_images/tutorial_results_table_filename.png"><img alt="../../_images/tutorial_results_table_filename.png" src="../../_images/tutorial_results_table_filename.png" style="width: 387.0px; height: 192.5px;" /></a>
<figcaption>
<p><span class="caption-text">A frequency table for eleven nouns, summarized by ‘Filename’.</span></p>
</figcaption>
</figure>
<p>Apparently, <em>alice</em> occurs 50 times in chapter 7, 47 times in chapter 9, and
so on. You can rearrange these results by switching from the ‘Frequency list’
transformation to ‘Contingency table’. Again, use the data management toolbox
for this:</p>
<figure class="align-default" id="id12">
<a class="reference internal image-reference" href="../../_images/tutorial_aggregation_contingency.png"><img alt="../../_images/tutorial_aggregation_contingency.png" src="../../_images/tutorial_aggregation_contingency.png" style="width: 90.5px; height: 195.0px;" /></a>
<figcaption>
<p><span class="caption-text">Switching to the ‘Contingency table’ transformation.</span></p>
</figcaption>
</figure>
<p>You will notice that below the toolbox, the ‘Apply’ button will have become
active. Once you click on that button, all pending data management steps will
be applied to the results table. You can switch between the different
transformations without having to run the query again. This can be very
helpful if you are working with corpora that are much bigger than ALICE, as
queries can easily take a few minutes or more. For a detailled description of
data management in Coquery, see <a class="reference internal" href="../userguide/management.html#management"><span class="std std-ref">Data management</span></a> in the <a class="reference internal" href="../userguide/index.html#users"><span class="std std-ref">Users manual</span></a>.</p>
<p>For now, press the ‘Apply’ button to produce a contingency table a
contingency table instead of the frequency list:</p>
<figure class="align-default" id="id13">
<a class="reference internal image-reference" href="../../_images/tutorial_results_table_contingency.png"><img alt="../../_images/tutorial_results_table_contingency.png" src="../../_images/tutorial_results_table_contingency.png" style="width: 385.5px; height: 189.0px;" /></a>
<figcaption>
<p><span class="caption-text">The contingency table for the last query.</span></p>
</figcaption>
</figure>
<p>In this contingency table, each row corresponds to one noun from the query
strings, and each column corresponds to one chapter (use the ‘Feature order’
toolbox if you want to change what appears in the rows and and the columns of
a contingency table). We can quickly see for instance that <em>alice</em> is relatively frequent in all chapters, but <em>mouse</em>
is mentioned mostly in chapters 2 and 3.</p>
</section>
<section id="visualizing-the-results">
<h2>Visualizing the results</h2>
<p>The frequency table and the contingency table can already tell us a lot about
the distribution of the key characters within the <em>Alice</em> story, but by
making use of the visualization capabilities of Coquery, we can learn much
more.</p>
<p>The visualization designer helps you to visually understand the structure of
your query results. You can open the designer by selecting ‘Visualization
designer’ from the ‘Results’ menu:</p>
<figure class="align-default" id="id14">
<a class="reference internal image-reference" href="../../_images/visualization_designer.png"><img alt="../../_images/visualization_designer.png" src="../../_images/visualization_designer.png" style="width: 371.5px; height: 230.0px;" /></a>
<figcaption>
<p><span class="caption-text">The visualization designer.</span></p>
</figcaption>
</figure>
<p>The visualization designer consists of three panels: the data selection panel
on the left, the figure layout panel in the middle, and the figure selection
panel on the right. You can switch between the different tabs which allow you
to adjust the labels, the color, and the margins of the figures that you
create. This tutorial does not cover these tabs, but you can explore them
later.</p>
<p>In order to create a visualization, you first select the columns from the
results table that you want to include. In order to do this, you click on
one of the columns in the left panel. While keeping the mouse butten pressed,
drag the column onto one of the fields in the layout panel. Then, you select
a figure type by clicking on one of the icons in the right panel. After a
short moment, a figure will be shown.</p>
<p>One particularly useful visualization for analysing token occurrences across
a corpus is the ‘Barcode plot’ (users of <a class="reference external" href="http://www.laurenceanthony.net/software/antconc/">AntConc</a> will know a similar type of
visualization as ‘concordance plots’). We will create a barcode plot that
shows in which files the key characters occur.</p>
<p>First, drag the ‘Filename’ column to the field labeled ‘Y’. In this way, the
different values of the ‘Filename’ column will be arranged vertically. Next,
drag the ‘Word’ column to the field labeled ‘Columns’ under ‘Grid layout’.
This is what the visualization designer should look like:</p>
<figure class="align-default" id="id15">
<a class="reference internal image-reference" href="../../_images/visualization_designer_word_by_filename.png"><img alt="../../_images/visualization_designer_word_by_filename.png" src="../../_images/visualization_designer_word_by_filename.png" style="width: 371.5px; height: 230.0px;" /></a>
<figcaption>
<p><span class="caption-text">The visualization designer, with ‘Word’ in the ‘Y’ field, and ‘Filename’ in the ‘Column’ field.</span></p>
</figcaption>
</figure>
<p>Finally, click on the ‘Barcode plot’ icon in the right panel. The following
figure will be created:</p>
<figure class="align-default" id="id16">
<a class="reference internal image-reference" href="../../_images/barcode_alice.png"><img alt="../../_images/barcode_alice.png" src="../../_images/barcode_alice.png" style="width: 426.0px; height: 362.5px;" /></a>
<figcaption>
<p><span class="caption-text">A barcode plot showing the occurrences of each different noun.</span></p>
</figcaption>
</figure>
<p>As you can see, the plot is actually composed of several subplots, one for
each noun in the query string list. Each vertical line in the sub-figures
corresponds to one token in the query results table. The horizontal position
is the position within the corpus, and the vertical position is the chapter
that contains the token. Files are also color-coded so that the same color in
different sub-figure corrensponds to the same chapter.</p>
<p>It is easy to see that <em>alice</em> tokens occur frequently in all chapters.
<em>Turtle</em> and <em>gryphon</em> tokens occur only in chapters 10 and 11, and no other
key character apart from alice occurs in these chapters (apart from with
brief appearances of <em>queen</em>, <em>king</em>, and <em>duchess</em> at the beginning of
chapter 10). Also co-occurring characters are apparently <em>hatter</em> and
<em>dormouse</em> in chapters 6 and 11. It seems as if chapter 11 featured a larger
number of key characters than most of the other chapters, but this
figure is perhaps not the best visualization to confirm this.</p>
<p>You can easily change the visualization from inside of the designer dialog.
Simply drag the ‘Word’ column from the ‘Columns’ field to the ‘Y’ field. This
will replace the ‘Filename’ column, which will be returned to the list in the
left panel. Drag it to the ‘Columns’ field which was previously occupied by
the ‘Word’ column. Now, your visualization designer looks like this:</p>
<figure class="align-default" id="id17">
<a class="reference internal image-reference" href="../../_images/visualization_designer_filename_by_word.png"><img alt="../../_images/visualization_designer_filename_by_word.png" src="../../_images/visualization_designer_filename_by_word.png" style="width: 371.5px; height: 230.0px;" /></a>
<figcaption>
<p><span class="caption-text">The visualization designer, with ‘Filename’ in the ‘Y’ field, and ‘Word’ in the ‘Column’ field.</span></p>
</figcaption>
</figure>
<p>The new barcode plot will look like this:</p>
<figure class="align-default" id="id18">
<a class="reference internal image-reference" href="../../_images/barcode_alice2.png"><img alt="../../_images/barcode_alice2.png" src="../../_images/barcode_alice2.png" style="width: 426.0px; height: 362.5px;" /></a>
<figcaption>
<p><span class="caption-text">A barcode plot showing the occurrences of key characters in the different
chapters.</span></p>
</figcaption>
</figure>
<p>Indeed, chapter 11 features seven of the eleven key characters (even if
<em>gryphon</em> in light-red is mentioned only twice). Conspicuously, the only key
character to occur in chapter 5 is <em>alice</em>. The explanation is simple: as the
title of chapter 5 <em>Advice from a Caterpillar</em> suggests, we missed at least
one key character of the story.</p>
</section>
<section id="what-next">
<h2>What next?</h2>
<p>In this tutorial, you have experimented with a few of the key features of
Coquery: specifying query strings, selecting output features, rearranging and
transforming the results table, and visualizing the data.</p>
<p>You can learn more about these and other features in the <a class="reference internal" href="../userguide/index.html#users"><span class="std std-ref">Users manual</span></a>. A
detailed description of the different elements of the main interface and of
all menu entries is given in <a class="reference internal" href="../reference/index.html#reference"><span class="std std-ref">Reference guide</span></a>. More on building your own
corpora, as well as using Coquery with one of the supported third-party
corpora, is found in <a class="reference internal" href="../corpora/index.html#corpora"><span class="std std-ref">Corpus guide</span></a>.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
        </div>
        <div class="sidebar">
          
          <h3>Table of Contents</h3>
          
          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
            </form>
          </div>

        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="../index.html" title="Coquery documentation"
              >previous</a> |
            <a href="../userguide/index.html" title="Users manual"
              >next</a>
          </div>
          <div role="note" aria-label="source link">
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>